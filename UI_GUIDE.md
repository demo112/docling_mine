# Docling 可视化界面使用指南

## 🌟 概述

Docling 可视化界面是一个基于 Streamlit 的 Web 应用，为 Docling 文档转换工具提供了友好的图形化界面。用户可以通过浏览器轻松上传文档、选择输出格式、配置转换选项，并下载转换结果。

## 🚀 快速开始

### 1. 启动界面

有两种方式启动可视化界面：

#### 方式一：使用启动脚本（推荐）
```bash
python run_ui.py
```

#### 方式二：直接使用 Streamlit
```bash
# 首先安装依赖
pip install -r requirements_ui.txt

# 启动界面
streamlit run docling_ui.py --server.address localhost --server.port 8501
```

### 2. 访问界面

启动后，浏览器会自动打开，或者手动访问：
```
http://localhost:8501
```

## 📋 功能特性

### 🔄 多格式支持

界面支持以下输入格式：

**文档格式**
- PDF (.pdf)
- Word (.docx, .dotx, .docm, .dotm)
- PowerPoint (.pptx, .potx, .ppsx, .pptm, .potm, .ppsm)
- Excel (.xlsx, .xlsm)
- HTML (.html, .htm, .xhtml)
- Markdown (.md)
- CSV (.csv)

**图像格式**
- 常见图像 (.jpg, .jpeg, .png, .tif, .tiff, .bmp, .webp)

**音频格式**
- 音频文件 (.wav, .mp3, .m4a, .aac, .ogg, .flac)
- 视频文件 (.mp4, .avi, .mov)

**其他格式**
- AsciiDoc (.adoc, .asciidoc, .asc)
- XML (.xml, .nxml)
- VTT (.vtt)
- JSON (.json)

### 📤 输出格式

支持以下输出格式：
- **Markdown** (.md) - 结构化文本格式
- **HTML** (.html) - 网页格式
- **JSON** (.json) - 结构化数据格式
- **纯文本** (.txt) - 纯文本格式

## 🎛️ 界面操作指南

### 1. 主界面布局

- **头部区域**：显示应用标题和功能介绍
- **功能特性**：展示三大核心功能
- **侧边栏**：转换设置和配置选项
- **主内容区**：文件上传和结果显示

### 2. 转换设置（侧边栏）

#### 基本设置
- **输出格式选择**：选择转换后的文件格式
- **PDF 处理选项**：
  - 启用 OCR 文字识别
  - 启用表格结构识别

#### 高级选项
- **最大页数限制**：限制处理的最大页数
- **页码范围**：指定处理的页码范围

### 3. 文件上传

1. 点击"选择要转换的文件"区域
2. 选择一个或多个文件（支持批量上传）
3. 查看上传文件的信息表格
4. 确认文件格式识别状态

### 4. 开始转换

1. 配置转换设置
2. 点击"🚀 开始转换"按钮
3. 观察转换进度条
4. 等待转换完成

### 5. 查看结果

转换完成后，界面会显示：

- **统计信息**：总文件数、成功转换数、失败数
- **详细结果**：每个文件的转换状态
- **内容预览**：转换后内容的预览
- **下载选项**：单文件下载和批量下载

## 📥 下载功能

### 单文件下载
- 每个成功转换的文件都有独立的下载按钮
- 文件名会自动根据输出格式调整扩展名

### 批量下载
- 当有多个文件成功转换时，提供 ZIP 批量下载
- 所有成功转换的文件会打包成一个 ZIP 文件

## ⚙️ 配置选项详解

### PDF 处理选项

#### OCR 文字识别
- **功能**：对扫描的 PDF 进行文字识别
- **适用场景**：图片型 PDF、扫描文档
- **建议**：默认开启，提高文字提取准确性

#### 表格结构识别
- **功能**：识别和提取表格结构
- **适用场景**：包含表格的文档
- **建议**：默认开启，保持表格格式

### 页数限制
- **最大页数**：防止处理过大文档导致性能问题
- **页码范围**：精确控制处理的页面范围
- **建议**：根据实际需求调整

## 🎨 界面特色

### 现代化设计
- 渐变色主题
- 响应式布局
- 直观的图标和按钮

### 用户体验优化
- 实时进度显示
- 详细的状态反馈
- 友好的错误提示
- 批量操作支持

### 性能优化
- 临时文件自动清理
- 内存使用优化
- 大文件处理支持

## 🔧 故障排除

### 常见问题

#### 1. 界面无法启动
```bash
# 检查依赖是否安装
pip install -r requirements_ui.txt

# 检查端口是否被占用
lsof -i :8501
```

#### 2. 文件上传失败
- 检查文件格式是否支持
- 确认文件大小不超过限制
- 检查文件是否损坏

#### 3. 转换失败
- 查看详细错误信息
- 检查文件内容是否完整
- 尝试调整转换选项

#### 4. 下载问题
- 检查浏览器下载设置
- 确认有足够的磁盘空间
- 尝试刷新页面重新下载

### 性能优化建议

1. **大文件处理**：
   - 设置合理的页数限制
   - 分批处理多个文件
   - 关闭不必要的处理选项

2. **内存管理**：
   - 定期清理浏览器缓存
   - 避免同时处理过多文件
   - 及时下载并删除结果

## 📞 技术支持

### 日志查看
- 界面错误会在页面上显示
- 详细日志可在终端查看
- 转换过程中的错误会有详细堆栈信息

### 反馈渠道
- 通过界面的错误提示了解问题
- 查看终端输出获取详细信息
- 检查文件格式兼容性

## 🔄 更新和维护

### 依赖更新
```bash
pip install --upgrade streamlit pandas pillow
```

### 功能扩展
界面采用模块化设计，可以轻松添加新功能：
- 新的输入/输出格式
- 额外的处理选项
- 自定义样式主题

## 📚 相关文档

- [Docling 主要文档](README.md)
- [打包指南](PACKAGING_GUIDE.md)
- [API 文档](https://docling.readthedocs.io/)

---

**享受使用 Docling 可视化界面！** 🎉